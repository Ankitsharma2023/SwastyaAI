<script>
	import { createEventDispatcher } from 'svelte';
	const dispatch = createEventDispatcher();

	let isActive = false;
  let time = 0; 
  let timer;
	function iconHandler(type) {
		
		if (type === 'PLAY' || type === 'PAUSE') {
			isActive = !isActive;
			if (isActive) {
				startTimer();
			} else {
				stopTimer();
			}
		}
		let actionType =
			type === 'PLAY' && isActive ? 'PLAY' : type === 'PLAY' && !isActive ? 'PAUSE' : type;
		dispatch('recorderHandler', {
			actionType: actionType
		});
	}
	function startTimer() {
    timer = setInterval(() => {
      time += 1;
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timer);
  }

  function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const remainingSeconds = seconds % 60;
    return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
  }
</script>

<div class="flex flex-col justify-center items-center gap-2">
	<div class="p-12  flex flex-col justify-center items-center bg-[#DEEDF3] rounded-3xl border-2 border-[#004E86] gap-2">
		<div class="text-[#004E86] flex flex-row text-[24px] font-[600] gap-5">Start Recording <svg width="56" height="57" viewBox="0 0 56 57" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M44.6267 5.28701C44.5001 4.6507 44.1618 4.07862 43.6691 3.66772C43.1764 3.25681 42.5597 3.03233 41.9234 3.03233C41.2871 3.03233 40.6703 3.25681 40.1776 3.66772C39.685 4.07862 39.3467 4.6507 39.22 5.28701L38.558 8.64228C38.4515 9.18731 38.1893 9.68799 37.8045 10.0812C37.4196 10.4744 36.9293 10.7426 36.3953 10.8519L33.1071 11.5219C32.4805 11.6483 31.9164 11.9927 31.5109 12.4963C31.1054 12.9999 30.8838 13.6314 30.8838 14.2832C30.8838 14.935 31.1054 15.5665 31.5109 16.0701C31.9164 16.5737 32.4805 16.9181 33.1071 17.0445L36.3953 17.7145C36.9298 17.8233 37.4207 18.0912 37.8061 18.4845C38.1915 18.8778 38.4541 19.3787 38.5607 19.9241L39.2173 23.2794C39.3412 23.9187 39.6787 24.4944 40.1722 24.9082C40.6657 25.3219 41.2847 25.5481 41.9234 25.5481C42.5621 25.5481 43.181 25.3219 43.6746 24.9082C44.1681 24.4944 44.5056 23.9187 44.6295 23.2794L45.286 19.9241C45.3927 19.3787 45.6553 18.8778 46.0407 18.4845C46.4261 18.0912 46.917 17.8233 47.4515 17.7145L50.7396 17.0445C51.3662 16.9181 51.9304 16.5737 52.3359 16.0701C52.7413 15.5665 52.963 14.935 52.963 14.2832C52.963 13.6314 52.7413 12.9999 52.3359 12.4963C51.9304 11.9927 51.3662 11.6483 50.7396 11.5219L47.4515 10.8519C46.917 10.7431 46.4261 10.4751 46.0407 10.0819C45.6553 9.68863 45.3927 9.18769 45.286 8.64228L44.6267 5.28701ZM19.7145 16.2085C19.5318 15.6474 19.1806 15.1593 18.7107 14.8133C18.2408 14.4673 17.6761 14.2812 17.0966 14.2812C16.5172 14.2812 15.9525 14.4673 15.4826 14.8133C15.0127 15.1593 14.6615 15.6474 14.4788 16.2085L12.5947 21.9817C12.4593 22.3967 12.231 22.7739 11.9279 23.0831C11.6248 23.3924 11.2553 23.6254 10.8486 23.7635L5.19083 25.686C4.64094 25.8725 4.16254 26.2308 3.8235 26.7103C3.48446 27.1898 3.302 27.766 3.302 28.3573C3.302 28.9486 3.48446 29.5248 3.8235 30.0043C4.16254 30.4838 4.64094 30.8422 5.19083 31.0286L10.8486 32.9539C11.255 33.0918 11.6244 33.3243 11.9274 33.6331C12.2305 33.9419 12.459 34.3184 12.5947 34.7329L14.4788 40.5061C14.6615 41.0672 15.0127 41.5554 15.4826 41.9013C15.9525 42.2473 16.5172 42.4335 17.0966 42.4335C17.6761 42.4335 18.2408 42.2473 18.7107 41.9013C19.1806 41.5554 19.5318 41.0672 19.7145 40.5061L21.5986 34.7329C21.7339 34.3179 21.9622 33.9408 22.2653 33.6315C22.5684 33.3222 22.938 33.0892 23.3447 32.9511L29.0024 31.0286C29.5523 30.8422 30.0307 30.4838 30.3698 30.0043C30.7088 29.5248 30.8913 28.9486 30.8913 28.3573C30.8913 27.766 30.7088 27.1898 30.3698 26.7103C30.0307 26.2308 29.5523 25.8725 29.0024 25.686L23.3447 23.7635C22.938 23.6254 22.5684 23.3924 22.2653 23.0831C21.9622 22.7739 21.7339 22.3967 21.5986 21.9817L19.7145 16.2085ZM39.0242 38.7271C38.8415 38.166 38.4903 37.6779 38.0204 37.3319C37.5505 36.9859 36.9858 36.7997 36.4063 36.7997C35.8269 36.7997 35.2622 36.9859 34.7923 37.3319C34.3224 37.6779 33.9712 38.166 33.7885 38.7271L33.2809 40.2781C33.1458 40.6928 32.9179 41.0697 32.6153 41.379C32.3127 41.6882 31.9437 41.9214 31.5375 42.0599L30.0176 42.575C29.4677 42.7614 28.9893 43.1198 28.6503 43.5993C28.3112 44.0787 28.1287 44.655 28.1287 45.2463C28.1287 45.8375 28.3112 46.4138 28.6503 46.8933C28.9893 47.3727 29.4677 47.7311 30.0176 47.9175L31.5375 48.4326C31.9442 48.5708 32.3138 48.8037 32.6169 49.113C32.92 49.4223 33.1483 49.7994 33.2837 50.2144L33.7885 51.7654C33.9712 52.3265 34.3224 52.8147 34.7923 53.1606C35.2622 53.5066 35.8269 53.6928 36.4063 53.6928C36.9858 53.6928 37.5505 53.5066 38.0204 53.1606C38.4903 52.8147 38.8415 52.3265 39.0242 51.7654L39.5317 50.2144C39.6668 49.7997 39.8947 49.4228 40.1973 49.1135C40.4999 48.8043 40.8689 48.5711 41.2751 48.4326L42.7951 47.9175C43.345 47.7311 43.8234 47.3727 44.1624 46.8933C44.5014 46.4138 44.6839 45.8375 44.6839 45.2463C44.6839 44.655 44.5014 44.0787 44.1624 43.5993C43.8234 43.1198 43.345 42.7614 42.7951 42.575L41.2751 42.0571C40.8687 41.9192 40.4993 41.6867 40.1963 41.3779C39.8932 41.0691 39.6647 40.6926 39.529 40.2781L39.0242 38.7271Z" fill="#004E86"/>
			</svg>
		</div>
		<div class="text-[#004E86]">Tap to start recording</div>
		<button class="icon__wrapper" on:click={() => iconHandler('PLAY')}>
			<div class="relative">
				
				{#if !isActive}
				<svg width="175" height="176" viewBox="0 0 275 276" fill="none" xmlns="http://www.w3.org/2000/svg">
					<g filter="url(#filter0_dd_63_2227)">
					<circle cx="137.525" cy="136.301" r="131.25" fill="white"/>
					<circle cx="137.525" cy="136.301" r="130.5" stroke="#004E86" stroke-width="1.5"/>
					</g>
					<path d="M121.902 164.422L165.652 136.297L121.902 108.172V164.422ZM137.527 198.797C128.881 198.797 120.756 197.156 113.152 193.872C105.547 190.589 98.9329 186.137 93.3079 180.516C87.6829 174.895 83.2308 168.281 79.9516 160.672C76.6725 153.064 75.0308 144.939 75.0266 136.297C75.0225 127.656 76.6641 119.531 79.9516 111.922C83.2391 104.314 87.6912 97.6996 93.3079 92.0787C98.9245 86.4579 105.539 82.0058 113.152 78.7225C120.764 75.4392 128.889 73.7975 137.527 73.7975C146.164 73.7975 154.289 75.4392 161.902 78.7225C169.514 82.0058 176.129 86.4579 181.745 92.0787C187.362 97.6996 191.816 104.314 195.108 111.922C198.4 119.531 200.039 127.656 200.027 136.297C200.014 144.939 198.372 153.064 195.102 160.672C191.831 168.281 187.379 174.895 181.745 180.516C176.112 186.137 169.497 190.591 161.902 193.879C154.306 197.166 146.181 198.806 137.527 198.797ZM137.527 186.297C151.485 186.297 163.308 181.454 172.995 171.766C182.683 162.079 187.527 150.256 187.527 136.297C187.527 122.339 182.683 110.516 172.995 100.829C163.308 91.1412 151.485 86.2975 137.527 86.2975C123.568 86.2975 111.745 91.1412 102.058 100.829C92.3704 110.516 87.5266 122.339 87.5266 136.297C87.5266 150.256 92.3704 162.079 102.058 171.766C111.745 181.454 123.568 186.297 137.527 186.297Z" fill="#004E86"/>
					<defs>
					<filter id="filter0_dd_63_2227" x="0.275391" y="0.550781" width="274.5" height="274.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
					<feFlood flood-opacity="0" result="BackgroundImageFix"/>
					<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
					<feMorphology radius="1.5" operator="dilate" in="SourceAlpha" result="effect1_dropShadow_63_2227"/>
					<feOffset dy="1.5"/>
					<feGaussianBlur stdDeviation="2.25"/>
					<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"/>
					<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_63_2227"/>
					<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
					<feOffset dy="1.5"/>
					<feGaussianBlur stdDeviation="1.5"/>
					<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>
					<feBlend mode="normal" in2="effect1_dropShadow_63_2227" result="effect2_dropShadow_63_2227"/>
					<feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_63_2227" result="shape"/>
					</filter>
					</defs>
					</svg>
				{:else}
				<svg width="175" height="175" viewBox="0 0 275 275" fill="none" xmlns="http://www.w3.org/2000/svg">
					<g filter="url(#filter0_dd_63_992)">
					<circle cx="137.525" cy="136.167" r="131.25" fill="white"/>
					<circle cx="137.525" cy="136.167" r="130.5" stroke="#004E86" stroke-opacity="0.52" stroke-width="1.5"/>
					</g>
					<path d="M108.358 91.1667H123.914C123.914 91.1667 129.748 91.1667 129.748 97.3031V175.03C129.748 175.03 129.748 181.167 123.914 181.167H108.358C108.358 181.167 102.525 181.167 102.525 175.03V97.3031C102.525 97.3031 102.525 91.1667 108.358 91.1667Z" fill="#004E86"/>
					<path d="M151.135 91.1667H166.691C166.691 91.1667 172.524 91.1667 172.524 97.3031V175.03C172.524 175.03 172.524 181.167 166.691 181.167H151.135C151.135 181.167 145.302 181.167 145.302 175.03V97.3031C145.302 97.3031 145.302 91.1667 151.135 91.1667Z" fill="#004E86"/>
					<defs>
					<filter id="filter0_dd_63_992" x="0.274902" y="0.416687" width="274.5" height="274.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
					<feFlood flood-opacity="0" result="BackgroundImageFix"/>
					<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
					<feMorphology radius="1.5" operator="dilate" in="SourceAlpha" result="effect1_dropShadow_63_992"/>
					<feOffset dy="1.5"/>
					<feGaussianBlur stdDeviation="2.25"/>
					<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"/>
					<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_63_992"/>
					<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
					<feOffset dy="1.5"/>
					<feGaussianBlur stdDeviation="1.5"/>
					<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>
					<feBlend mode="normal" in2="effect1_dropShadow_63_992" result="effect2_dropShadow_63_992"/>
					<feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_63_992" result="shape"/>
					</filter>
					</defs>
					</svg>
				{/if}
			</div>
		</button>
		<div class="text-[#004E86]">{formatTime(time)}</div>
	</div>
		<div class="flex flex-row justify-evenly items-center gap-5 w-1/2">
			<button class={isActive ? 'hidden' : ''} on:click={() => iconHandler('RESET')}>
				<i class="fas fa-undo fontIcons" />
				<svg width="41" height="50" viewBox="0 0 51 60" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M25.6599 59.3489C22.1414 59.3489 18.8461 58.6809 15.7742 57.3448C12.7023 56.0087 10.0282 54.2025 7.75198 51.9262C5.47573 49.65 3.66955 46.9759 2.33345 43.904C0.997344 40.8321 0.328354 37.5359 0.326477 34.0155H5.95612C5.95612 39.5044 7.86833 44.1611 11.6927 47.9855C15.5171 51.8099 20.1729 53.7211 25.6599 53.7193C31.1469 53.7174 35.8036 51.8061 39.6299 47.9855C43.4561 44.1648 45.3674 39.5082 45.3637 34.0155C45.3599 28.5228 43.4486 23.8671 39.6299 20.0483C35.8111 16.2296 31.1544 14.3174 25.6599 14.3117H25.2377L29.6006 18.6747L25.6599 22.7562L14.4006 11.4969L25.6599 0.23761L29.6006 4.31911L25.2377 8.68208H25.6599C29.1784 8.68208 32.4746 9.35107 35.5484 10.6891C38.6222 12.027 41.2962 13.8332 43.5706 16.1076C45.845 18.382 47.6512 21.056 48.9892 24.1298C50.3271 27.2036 50.9952 30.4988 50.9933 34.0155C50.9914 37.5322 50.3234 40.8283 48.9892 43.904C47.6549 46.9796 45.8488 49.6537 43.5706 51.9262C41.2925 54.1987 38.6184 56.0049 35.5484 57.3448C32.4783 58.6846 29.1822 59.3527 25.6599 59.3489Z" fill="#004E86"/>
					</svg>
					
			</button>

			<button class={isActive ? 'hidden' : ''} on:click={() => iconHandler('SAVE')}>
				<i class="fas fa-save fontIcons" />
				<svg width="54" height="42" viewBox="0 0 64 52" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M2.55457 17.7569H61.6696M56.3914 49.4256H7.83269C6.43284 49.4256 5.09033 48.8696 4.10049 47.8797C3.11065 46.8899 2.55457 45.5474 2.55457 44.1475V8.25627C2.55457 6.85643 3.11065 5.51392 4.10049 4.52408C5.09033 3.53424 6.43284 2.97815 7.83269 2.97815H17.8466C18.8888 2.97818 19.9076 3.28671 20.7747 3.86487L24.4482 6.31392C25.3153 6.89208 26.3341 7.20062 27.3763 7.20065H56.3914C57.7913 7.20065 59.1338 7.75674 60.1236 8.74658C61.1135 9.73642 61.6696 11.0789 61.6696 12.4788V44.1475C61.6696 45.5474 61.1135 46.8899 60.1236 47.8797C59.1338 48.8696 57.7913 49.4256 56.3914 49.4256Z" stroke="#004E86" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					
			</button>
		</div>
</div>
